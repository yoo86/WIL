## CPU 스케줄링
### 스케줄링이란?
- 말그대로 스케줄을 짜주는 것

### CPU 스케줄러
- 운영체제에서 식당 관리자의 역할을 담당
- 여러 프로세스의 상황을 고려하여 CPU와 시스템 자원의 배정을 결정

***
### 스케줄링의 단계
__1. 고수준 스케줄링__
- 전체 시스템의 부하를 고려하여 전체 작업 수 조절
- 동시 실행 가능한 프로세스의 총개수가 정해짐
- 장기 스케줄링, 작업 스케줄링, 승인 스케줄링

__2. 저수준 스케줄링__
- 실제 작업 수행
- 어떤 프로세스에 CPU를 할당할지 어떤 프로세스를 대기 상태로 보낼지 등을 결정
- 시분할 시스템에서 프로세스 옮길 때 이용(프로세스 = 프로그램 + PCB)
- 단기 스케줄링

__3. 중간 수준 스케줄링__
- 중간에서 시스템 과부하를 막기 위해 작동
- 활성화된 프로세스 수 조절을 통해 과부하를 막음
- 저수준 스케줄링이 잘 이루어지도록 완충하는 역할
- 전체 프로세스 수를 조절할 때는 이미 활성화된 프로세스 중 일부를 보류 상태로 보냄

![image](https://user-images.githubusercontent.com/93065107/138877685-241588e6-342c-416f-a8f5-28525c5c6528.png)
***
### CPU 스케줄링의 목적
__1. 공평성__
- 모든 프로세스가 자원을 공평하게 배정받아야 함
- 특정 프로세스가 자원 배정 과정에서 배제되어서는 안 됨

__2. 효율성__
- 시스템 자원이 유휴 시간 없이 사용되도록 스케줄링
- 유휴 자원을 사용하려는 프로세스에는 우선권을 주어야 함

__3. 안정성__
- 우선순위를 사용해 중요 프로세스가 먼저 작동하도록 배정
- 시스템 자원을 과도하게 점유하거나 파괴하려는 프로세스로부터 자원을 보호

__4. 확장성__
- 프로세스가 증가해도 안정적으로 작동하도록 조치
- 시스템 자원이 늘어나는 경우에도 시스템에 반영되게 해야 함

__5. 반응 시간 보장__
- 사용자는 응답이 없는 경우 시스템이 멈춘 것으로 가정을 하기 때문에 시스템은 적절한 시간 안에 프로세스의 요구에 반응해야 함

__6. 무한 연기 방지__
- 특정 프로세스의 작업이 무한히 연기되어서는 안 됨
***
### 선점형 스케줄링과 비선점형 스케줄링
__1. 선점형 스케줄링__
- OS가 선점
- 실행 상태에 있는 프로세스 작업 중단하고 새로운 작업 시작이 가능
- 빠른 응답 시간을 요구하는 대화형 시스템이나 시분할 시스템에 적합
- 대부분의 저수준 스케줄러는 선점형 스케줄링 방식을 사용

__2. 비선점형 스케줄링__
- OS가 비선점
- 실행 상태에 있는 프로세스 작업 중단 불가능
- 자발적으로 프로세스가 대기 상태에 들어가거나 종료하기 전까지 계속 실행
- 선점형보다 작업량이 적지만 문맥 교환에 의한 낭비는 적음
- CPU 사용 시간이 긴 프로세스 때문에 사용 시간이 짧은 프로세스가 오랫동안 기다리게 되는 일이 생길 수 있어 시스템 처리율이 떨어짐
- 과거의 일괄 작업 시스템에서 사용하던 방식
***
### 프로세스 우선순위
- 커널 프로세스의 우선순위가 일반 프로세스보다 높음
- 우선순위가 높은 프로세스가 CPU를 먼저 사용하고 오랫동안 차지할 수 있음

### CPU 집중 프로세스와 입출력 집중 프로세스
__1. CPU 집중 프로세스__
- CPU를 많이 사용하는 프로세스
- CPU 버스트가 많은 프로세스

__2. 입출력 집중 프로세스__
- 입출력을 많이 사용하는 프로세스
- 예를 들면 저장장치에서 데이터를 복사하는 일
- 입출력 버스트가 많은 프로세스

__* CPU 집중 프로세스와 입출력 집중 프로세스가 같이 있을 때는 입출력 집중 프로세스를 먼저 실행 상태로 옮기는 것이 효율적__
- 입출력 집중 프로세스가 먼저 실행되면 입출력 요구에 의해 대기 상태로 옮겨지기 때문에 다른 프로세스가 CPU를 사용할 수 있기 때문이다.

![image](https://user-images.githubusercontent.com/93065107/138879734-6c9e41d9-62c2-40e8-8d5c-38e05c1be601.png)

#### * 우선배정
- 스케줄링을 할 때 입출력 집중 프로세스의 우선순위를 CPU 집중 프로세스보다 높이면 시스템 효율이 향상

![image](https://user-images.githubusercontent.com/93065107/138880842-b7701aa4-9c32-4e21-be9d-c6112c31dbdb.png)

__3. 전면 프로세스__
- GUI를 사용하는 운영체제에서 화면의 맨 앞에 높인 프로세스
- 현재 입력과 출력을 사용하는 프로세스
- 사용자와 상호작용이 가능하여 상호작용 프로세스라고도 함

__4. 후면 프로세스__
- 사용자와 상호작용이 없는 프로세스
- 사용자의 입력 없이 작동하기 때문에 일괄 작업 프로세스라고도 함
- 전면 프로세스의 우선순위가 후면 프로세스보다 높음
